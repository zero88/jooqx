== Rxify version

Wanna use #jooq with #reactivex on #vertx...

Stay tuned, one more step

`jOOQ.x` supports out of the box https://vertx.io/docs/vertx-rx/java2/[Vert.x RxJava]

To use `jOOQ.x API` for RxJava2, add the following dependency to the dependencies section of your build descriptor:

=== Maven (in your `pom.xml`)

[source,xml]
----
<dependency>
   <groupId>io.vertx</groupId>
   <artifactId>vertx-rx-java2</artifactId>
   <version>4.0.3</version>
</dependency>
<dependency>
  <groupId>io.github.zero88</groupId>
  <artifactId>jooqx</artifactId>
  <version>{jooqx-version}</version>
</dependency>


----

=== Gradle (in your `build.gradle` or `build.gradle.kts`)

[source,gradle]
----
dependencies {
    api("io.github.zero88:jooqx:{jooqx-version}")
    api("io.vertx:vertx-rx-java2:4.0.3")
    // Other database libs depends on your application
}

----

Then you can use same as `Vertx rx-java2 Rxified API`

=== By `jooqx` instance

[source,java]
----
SelectForUpdateStep<BooksRecord> q = jooqx.dsl()
                                          .selectFrom(Tables.BOOKS)
                                          .orderBy(Tables.BOOKS.TITLE)
                                          .limit(10)
                                          .offset(5);
// To rx-ify version
io.github.zero88.jooqx.reactivex.Jooqx rxJooqx = io.github.zero88.jooqx.reactivex.Jooqx.newInstance(jooqx);

// Rx-execute
rxJooqx.rxExecute(q, DSLAdapter.fetchMany(q.asTable())).subscribe(records -> {
    BooksRecord record = records.get(0);
    System.out.println(record.getId()); // output: 1
    System.out.println(record.getTitle()); // output: jooqx
}, err -> { });
----

=== By reactive builder

[source,java]
----
JDBCConnectOptions connOpts = new io.vertx.jdbcclient.JDBCConnectOptions().setJdbcUrl("jdbc:h2:mem:jooqx");
PoolOptions poolOptions = new io.vertx.sqlclient.PoolOptions().setMaxSize(5);
JDBCPool jdbcPool = io.vertx.reactivex.jdbcclient.JDBCPool.pool(vertx, connOpts, poolOptions);
// Build jOOQ query
SelectForUpdateStep<BooksRecord> q = dsl.selectFrom(Tables.BOOKS)
                                        .orderBy(Tables.BOOKS.TITLE)
                                        .limit(10)
                                        .offset(5);

// Create rxify jooqx by builder
io.github.zero88.jooqx.reactivex.Jooqx jooqx = io.github.zero88.jooqx.reactivex.Jooqx.builder()
                                                                                     .setVertx(vertx)
                                                                                     .setDSL(dsl)
                                                                                     .setSqlClient(jdbcPool)
                                                                                     .build();
// Rx-execute
jooqx.rxExecute(q, DSLAdapter.fetchMany(q.asTable())).subscribe(records -> {
    BooksRecord record = records.get(0);
    System.out.println(record.getId()); // output: 1
    System.out.println(record.getTitle()); // output: jooqx
}, err -> { });
----